#############################
#	Fonctionnement HTTP		#
#############################

Un client envoie une requete HTTP a un serveur qui lui renvoie une reponse

# STRUCTURE REQUETE

GET /index.html HTTP/1.1     â† ligne de requÃªte
Host: www.exemple.com        â† header
User-Agent: Mozilla/5.0      â† header
Accept: text/html            â† header
Accept-Language: fr-FR,...   â† header
Connection: keep-alive       â† header
                             â† ligne vide
[pas de body]                â† corps vide

_ La ligne de requete est l'element principal qui correspond a l'action qu'on a envie de realiser.
	methode, ressource, version
	GET : demande une ressource
	POST : envoie des donnees au serveur (creation ou traitement)
	DELETE : supprimer une ressource

_ Le header est un ensemble d'option et de precision.
	type de contenu, tailles, cookies...

_ Le body est l'ensemble des donnees envoyees par le client au server (utilise seulement si necessaire). Avec un GET il sera vide tandis qu'avec un POST ou PUT il y  aura quelque chose.
POST /form HTTP/1.1
Host: www.exemple.com
Content-Type: application/x-www-form-urlencoded
Content-Length: 27

nom=Luc&message=Bonjour


# STRUCTURE REPONSE

HTTP/1.1 200 OK							â† ligne de status
Date: Mon, 11 Aug 2025 15:20:00 GMT		â† header
Server: MonServeurHTTP/1.0				â† header
Content-Type: text/html; charset=UTF-8	â† header
Content-Length: 125						â† header
Connection: keep-alive					â† header
										â† ligne vide
<!DOCTYPE html>							â† corps
<html>									â† corps
<head><title>Exemple</title></head>		â† corps
<body>									â† corps
<h1>Bienvenue sur mon site</h1>			â† corps
<p>Ceci est une page HTML.</p>			â† corps
</body>									â† corps
</html>									â† corps

_ La ligne de status est le code de retour avec un message.
	Code important :
		200 : OK
		404 : Not Found, le serveur ne trouve pas ce qui est demande
		405 : Method not allowed, le serveur connait la requete mais elle n'est pas supportee par la ressource cible
		500 : Internal Server Error, le serveur a un probleme inattendu qui l'empeche de repondre a la requete

_ Le header donne des informations sur la reponse.

_ Le body est le contenu renvoye par le serveur.








Niveau 2 â€” Multi-clients avec multiplexage

ğŸ¯ Objectif : GÃ©rer plusieurs connexions en mÃªme temps avec poll.

    Serveur Echo multi-clients

        Utilise poll() pour suivre le socket principal + tous les clients connectÃ©s.

        DÃ¨s quâ€™un client envoie un message, le serveur le renvoie.

        GÃ¨re les dÃ©connexions proprement (supprimer le fd de la liste quand recv retourne 0).

    Chat Room minimal

        AmÃ©liore lâ€™echo server :

            Quand un client envoie un message, envoie-le Ã  tous les autres clients.

            Teste avec plusieurs nc ouverts en mÃªme temps.

Niveau 3 â€” Communication Client â†’ Serveur

ğŸ¯ Objectif : Manipuler les requÃªtes HTTP brutes.

    Serveur HTTP minimal (GET)

        Ton serveur reÃ§oit une requÃªte brute HTTP (GET / HTTP/1.1).

        Il renvoie une rÃ©ponse minimale :

        HTTP/1.1 200 OK
        Content-Type: text/plain
        Content-Length: 13

        Hello, world!

        Teste avec curl http://localhost:8080/.

    Serveur HTTP statique

        Lis un fichier du disque (open, read) et envoie-le comme body.

        Utilise le bon Content-Type selon lâ€™extension (.html, .txtâ€¦).

        Teste avec un fichier index.html.

Niveau 4 â€” Fonctions avancÃ©es

ğŸ¯ Objectif : Te rapprocher de webserv.

    Serveur non-bloquant

        Mets ton socket principal et tes sockets clients en mode non-bloquant (fcntl + O_NONBLOCK).

        Continue Ã  utiliser poll() pour dÃ©tecter la lecture/Ã©criture.

    Timeouts de connexion

        Avec poll(), utilise le timeout pour fermer les connexions inactives aprÃ¨s X secondes.

    Mini-CGI

        Si la requÃªte est GET /script, exÃ©cute un petit script bash ou python avec fork() + execve(), rÃ©cupÃ¨re sa sortie via pipe, et renvoie-la au client.